# EventHubBot - Система управления мероприятиями

## Описание
EventHubBot - это Telegram-бот для организации и управления мастер-классами. Бот позволяет администраторам и организаторам создавать мастер-классы, а пользователям - регистрироваться на них. Имеется функционал создания новостей, отслеживания посещений и многое другое.

## Требования
* Java 17 или новее
* Maven
* PostgreSQL (или другая реляционная СУБД, настроенная в application.properties)
* Зарегистрированный бот в Telegram (получите токен через @BotFather)

## Настройка проекта

### 1. Клонировать репозиторий
```
git clone <URL репозитория>
cd EventHubBot
```

### 2. Настройка конфигурации
Создайте файл `src/main/resources/application.properties` (если он отсутствует) и добавьте следующие параметры:

```properties
# Настройки Telegram бота
app.telegram-token=ВАШ_ТОКЕН_TELEGRAM_БОТА
app.telegram-bot-username=ИМЯ_ВАШЕГО_БОТА_БЕЗ_@

# Настройки базы данных
spring.datasource.url=jdbc:postgresql://localhost:5432/eventhub
spring.datasource.username=postgres
spring.datasource.password=ВАШ_ПАРОЛЬ
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Настройки загрузки файлов
app.uploads.news-images=uploads/news
```

Заменить значения `ВАШ_ТОКЕН_TELEGRAM_БОТА`, `ИМЯ_ВАШЕГО_БОТА_БЕЗ_@` и `ВАШ_ПАРОЛЬ` на ваши.

### 3. Создание базы данных
Создайте базу данных в PostgreSQL:
```sql
CREATE DATABASE eventhub;
```

## Запуск проекта

### Запуск через Maven
```
mvn spring-boot:run
```

### Запуск JAR-файла
```
mvn clean package
java -jar target/bot-0.0.1-SNAPSHOT.jar
```

## Основные функции бота

### Команды для всех пользователей
- `/start` - начало работы с ботом и регистрация
- `/my_qr` - показать QR-код для отметки посещения
- `/workshops` - список доступных мастер-классов
- `/workshop_info <id>` - информация о конкретном мастер-классе
- `/register_workshop <id>` - записаться на мастер-класс
- `/cancel_workshop <id>` - отменить запись на мастер-класс
- `/my_workshops` - ваши мастер-классы
- `/my_roles` - ваши роли в системе
- `/my_news` - доступные новости
- `/help` - справка по командам

### Команды для организаторов и администраторов
- `/create_workshop <название>|<описание>|<дата>|<время начала>|<время окончания>|<количество мест>` - создать мастер-класс
- `/edit_workshop <id>|...` - изменить мастер-класс
- `/delete_workshop <id>` - удалить мастер-класс
- `/workshop_participants <id>` - список участников мастер-класса
- `/workshop_attendance <id>` - отчет о посещении мастер-класса
- `/scan_qr <qr_content>` - сканировать QR-код участника
- `/create_news` - создать глобальную новость
- `/create_workshop_news` - создать новость для мастер-класса

## Устранение неполадок

### Проблемы с базой данных
Если возникают ошибки при подключении к БД, проверьте:
- Правильность подключения к БД в application.properties
- Установлен ли PostgreSQL и запущен ли он
- Есть ли у пользователя права на создание таблиц

### Проблемы с Telegram API
Если бот не отвечает:
- Проверьте правильность токена и имени бота
- Убедитесь, что бот не заблокирован

### Проблемы с загрузкой файлов
- Убедитесь, что указанная директория для загрузки существует или имеет права на создание 